<!DOCTYPE html>
<html>
<head>
	<meta name="author" content="Yeeku.H.Lee(CrazyIt.org)" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title> 拖放表格数据 </title>
	<!-- 导入Ext JS必需的CSS样式单 -->
	<link href="extjs/resources/css/ext-all.css" rel="stylesheet" type="text/css" />
	<!-- 导入Ext JS必需的JavaScript库 -->
	<script type="text/javascript" src="extjs/ext-all.js">
	</script>
	<!-- 导入Ext JS国际化所需的JavaScript库 -->
	<script type="text/javascript" src="extjs/ext-lang-zh_CN.js">
	</script>
	<!-- 导入对本地数据进行分页所需的JavaScript库 -->
	<script type="text/javascript" src="PagingMemoryProxy.js">
	</script>
</head>
<body>
<script type="text/javascript">
Ext.onReady(function(){
	// 定义本地数据
	var data = {
		users: [
			{id: 1, name: '孙悟空', email: 'sun@tian.com'},
			{id: 2, name: '猪八戒', email: 'zhu@tian.com'},
			{id: 3, name: '白骨精', email: 'bai@tian.com'},
			{id: 4, name: '蜘蛛精', email: 'zhi@tian.com'},
			{id: 5, name: '牛魔王', email: 'niu@tian.com'}
		],
		total:5
	};
	var userStore = Ext.create('Ext.data.Store', 
	{
		// 指定Store包含的记录所包含的字段
		fields:['id' , 'name', 'email'],
		// 使用proxy指定加载本地数据
		proxy: {
			type: 'pagingmemory', // 指定使用PagingMemoryProxy控制读取内存数据
			data: data,
			reader: {
				type: 'json',
				root: 'users', // 直接读取users数据
				totalProperty: 'total' // total属性值代表了总记录条数
			}
		},
		autoLoad: true // 指定自动加载
	});
	Ext.create('Ext.grid.Panel', {
		title: '员工信息',
		store: userStore,
		columns: [
			{ header: 'ID', dataIndex: 'id' },
			{ header: '姓名', dataIndex: 'name'},
			{ header: 'Email', dataIndex: 'email' , flex: 1 }
		],
		width: 400,
		// 通过viewConfig选项配置Ext.grid.View对象
		viewConfig: {
			// 指定使用Ext.grid.plugin.DragDrop插件
			plugins: {
				ptype: 'gridviewdragdrop',
				dragText: '拖放数据'
			}
		},
		renderTo: Ext.getBody()
	});
});
</script>
</body>
</html>
